# WASP2 Conda Environment
# Channel order: bioconda requires conda-forge
# Source of truth for Python deps: pyproject.toml [project.dependencies]
name: WASP2
channels:
  - bioconda
  - conda-forge

dependencies:
  # Core Python
  - python=3.11.*

  # Data processing (aligned with pyproject.toml)
  - numpy>=1.21,<2.0  # <2.0 for ABI compatibility with pysam, pyarrow
  - pandas>=1.5,<3.0
  - polars>=0.19
  - scipy>=1.10

  # Bioinformatics (bioconda)
  - pysam>=0.21
  - pybedtools>=0.9
  - bedtools>=2.30
  - bcftools>=1.10
  - samtools>=1.10  # Required for collate -T option
  - htslib>=1.10
  - bwa>=0.7
  - anndata>=0.8,<0.12
  - scanpy>=1.9
  - plink2

  # CLI
  - typer>=0.12
  - rich>=13.0
  - typing_extensions

  # Development
  - pytest>=7.0
  - pytest-cov>=4.0
  - mypy>=1.0
  - ruff>=0.9

  # Rust build (PyO3)
  - rust>=1.70
  - libclang
  - clang

  # Pip-only dependencies
  - pip
  - pip:
    - Pgenlib>=0.90
    - maturin>=1.4,<2.0
