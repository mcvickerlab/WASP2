name: WASP2
channels:
  - bioconda
  - conda-forge
  - defaults
dependencies:
  # Core Python
  - python=3.11.*

  # Data processing
  - numpy
  - pandas>=2.0,<2.3  # Requires anndata>=0.10.7 for compatibility
  - polars>=0.19  # Pin minimum version for stable API
  - scipy

  # Bioinformatics
  - pysam
  - pybedtools
  - bedtools
  - bcftools
  - samtools>=1.10  # Required for collate -T option (indel processing)
  - htslib>=1.10
  - bwa  # Required for remapping step
  - anndata>=0.10.7,<0.11  # 0.10.7+ has pandas 2.x compatibility fixes
  - plink2  # For PGEN file format support

  # CLI
  - typer
  - rich
  - typing_extensions

  # Testing
  - pytest>=7.0
  - pytest-cov

  # Type checking
  - mypy

  # Rust build tools
  - rust
  - libclang
  - clang

  # Pip dependencies
  - pip
  - pip:
    - Pgenlib>=0.90  # Python bindings for PGEN format
    - maturin>=1.4,<2.0  # Upper bound prevents major version breaks
