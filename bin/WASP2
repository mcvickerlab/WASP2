#!/usr/bin/env python

import sys
from pathlib import Path

# TODO MAIN EXECUTABLE


def show_help():
    print("WASP2: Toolkit for allele-specific analysis, and unbiased read-mapping\n")
    print("Code:\thttps://github.com/mcvickerlab/WASP2\n")
    print("Usage:\t WASP2 <command> [options]\n")

    print("--Commands--\n")
    print("\tcount:\tCount alleles across reads containing heterozygous snp's")
    print("\tanalysis:\tMeasure allelic-imbalance across genomic regions")


def main():
    root_dir = Path(__file__).parent.parent

    cmd_list = ["count", "analysis"]

    if (len(sys.argv) < 2) or (sys.argv[1] not in cmd_list):
        show_help()
        sys.exit()

    if (sys.argv[1] == "count") or (sys.argv[1] == "analysis"):
        sys.path.append(str(root_dir / "src" / "analysis"))

        from run_analysis import parse_cmd, run

        args = parse_cmd()
        run(args)


if __name__ == "__main__":
    main()
